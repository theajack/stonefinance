<!doctype html>
<html lang="zh-Hans">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="renderer" content="webkit">
    <meta name="HandheldFriendly" content="true">
    <meta http-equiv="Cache-Control" content="no-siteapp" >
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no, email=no">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-tap-highlight" content="no">
    <title></title>
    <link rel="stylesheet" href="css/style.css?v=1">
    <link rel="stylesheet" href="css/base.min.css">
    <link rel="stylesheet" href="css/plugin.min.css">
  </head>
  <body class="bg-white">
    <div id="userCenter" class="display-none">     
      <div class="user-head">
        <img src="images/logo3.png" class="center-photo"/>
      </div>
      <div id="userCenterWrapper">
        <div class="mt-md">
          <label class="common-lable">
          <span>账号</span>
          ：</label>
          <input id="memberAccount" type="text" data-valid="notnull" placeholder="账号" disabled="disabled"/>
        </div>
        <form id="userCenterForm">
          <div class="mt-md">
            <label class="common-lable">
            <span>密码</span>
            <span class="notice-mark">*</span>：</label>
            <input class="common-input" type="password" data-name="password" data-valid="notnull" id="passWord" placeholder="密码" disabled="disabled"/>
          </div>
          <div class="mt-md">
            <label class="common-lable">
            <span>姓名</span>
            ：</label>
            <input class="common-input" type="text" data-name="membername"  placeholder="姓名" disabled="disabled"/>
          </div>
          <div class="position-relative">
            <div class="disabled-div display-none" id="disabledDiv"></div>
            <div class="mt-md">
              <label class="common-lable">
              <span>出生年月</span>
              ：</label>
              <input class="common-input" type="text" data-name="memberbir" id="memberBir" data-valid="datetime" placeholder="出生年月" disabled="disabled"/>
            </div>
          </div>
          <div class="mt-md">
            <label class="common-lable">
              <span>性别</span>
            ：</label>
            <span class="ml-lg">
              <label class="sex-select" for="female">女</label>
              <input class="radio-select" type="radio" name="membersex" id="female" disabled="disabled" onClick="changeSex('0')"/>
              <label class="sex-select" for="male">男</label>
              <input class="radio-select" type="radio" name="membersex" id="male" disabled="disabled" onClick="changeSex('1')"/>
              <input type="text" data-name="membersex" id="memberSex" class="display-none"/>
            </span>
          </div>
          <div class="mt-md">
            <label class="common-lable">
            <span>电话</span>
            ：</label>
            <input class="common-input" type="text" data-name="membertele" data-valid="phone" placeholder="电话" disabled="disabled"/>
          </div>
          <div class="mt-md mb-md">
            <label class="common-lable">
            <span>密保问题</span>
            ：</label>
            <input class="common-input" type="text" data-name="question" placeholder="密保问题" disabled="disabled"/>
          </div>
          <div class="mt-md mb-md">
            <label class="common-lable">
            <span>密保答案</span>
            ：</label>
            <input class="common-input" type="text" data-name="answer" placeholder="密保答案" disabled="disabled"/>
          </div>
        </form>
        <div class="edit-button" id="editBtn" onclick="editInfo()">编辑</div>
        <div class="edit-button display-none" id="finishBtn" onClick="updateUserData()">完成</div>
      </div>
    </div>
    <div id="allContent">
      <div class="head-wrapper">
        <div class="head-inner div-center text-center" id="headInfo">
          <span class="head-text active left" onClick="changePage(0)">搜索</span>
          <span class="head-text right" onClick="changePage(1)">分析</span>
          <a href="adddetail.html"><span class="glyphicon glyphicon-plus add-button"></span></a>
          <span class="user-photo glyphicon glyphicon-user" onclick="showCenterPage()"></span>
        </div>
      </div>   
      <div class="swiper-container" id="swiperPagesAnalysis">
        <div class="swiper-scrollbar">
          <div class="swiper-scrollbar-drag swiper-scrollbar-cursor-drag"></div>
        </div>
        <div class="swiper-wrapper">
          
                  
          <div class="swiper-slide">
            <form id="searchForm">
              <div class="p-sm clearfix set-shadow">
                <div class="statistics-left">
                  <input class="statistics-date" data-name="starttime" id="startDate"/>
                  <span class="time-line"></span>
                  <input class="statistics-date" data-name="endtime" id="endData"/>
                    <!--<input type="" id="inConsume">全部用户</span>-->
                  <div class="statistics-date mt-sm mr-sm" onclick="selectType(this)">
                    <span id="titleInfo">单人支出</span>
                    <input class="display-none" value="单人支出" data-name="searchtype"/>
                    <span class="glyphicon glyphicon-chevron-down list-type-arrow theme-color"></span>
                  </div>
                  <div class="list-type-select statistics-option">
                    <div class="text-center" onClick="changeSearchType(this,0)">单人支出</div>
                    <div class="text-center border-top-ddd"  onClick="changeSearchType(this,1)">单人收入</div>
                    <div class="text-center border-top-ddd" onClick="changeSearchType(this,2)">成员支出</div>
                    <div class="text-center border-top-ddd"  onClick="changeSearchType(this,3)">成员收入</div>
                  </div>
                  <input type="text" class="statistics-date mt-sm" id="consume" data-name="consumetype" readonly="true" onClick="showConsume()"/>
                </div>
                <div class="statistics-right">
                  <div class="statistics-inner">
                    <div class="statistics-split left detail-list bg-gray" id="analysisLists" onClick="changeDataShowType('list')">
                      <span class="glyphicon glyphicon-th-list" class="statistics-logo"></span>
                    </div>
                    <div class="statistics-split border-right" id="pieChart" onClick="changeDataShowType('pie')">
                      <img src="images/pie.jpg" class="statistics-logo"/>
                    </div>
                    <div class="statistics-split right" id="columnChart" onClick="changeDataShowType('column')">
                      <img src="images/column.jpg" class="statistics-logo"/>
                    </div>
                  </div>
                  <input class="statistics-date search-btn" type="button" onclick="searchBtn()" value="搜索"/>
                </div>
              </div>
            </form>
            <div id="analysisList">
              <div class="swiper-container" id="analysisSwiper">
                <div class="swiper-scrollbar">
                  <div class="swiper-scrollbar-drag swiper-scrollbar-cursor-drag"></div>
                </div>
                <div class="swiper-wrapper width-full">
                  <div class="swiper-slide width-full" id="analysisDiv">
                   
                  </div> 
                </div>
              </div>  
            </div> 
            <div id="container" class="canvas-wrapper little">
            
            </div>
          </div>
          
          <div class="swiper-slide">
            <form id="analysisForm">
              <div class="p-sm clearfix set-shadow">
                <div class="statistics-left">
                  <input class="statistics-date" data-name="starttime" id="startTime"/>
                  <span class="time-line"></span>
                  <input class="statistics-date" data-name="endtime" id="endTime"/>
                    <!--<input type="" id="inConsume">全部用户</span>-->
                  <span class="analysis-remind mt-sm">选择分类类型 :</span>
                   
                  <div class="statistics-date analysis-width" onclick="selectType(this)">
                    <span id="typeTitle">总收入-支出</span>
                    <span class="glyphicon glyphicon-chevron-down list-type-arrow theme-color"></span>
                  </div>
                  <div class="list-type-select analysis-option">
                    <div class="text-center" onClick="changeAnalysisType(this)">总收入-支出</div>
                    <div class="text-center border-top-ddd"  onClick="changeAnalysisType(this)">按月份</div>
                    <div class="text-center border-top-ddd" onClick="changeAnalysisType(this)">按收支类型</div>
                    <div class="text-center border-top-ddd"  onClick="changeAnalysisType(this)">按成员类型</div>
                  </div>
                </div>
                <div class="statistics-right">
                  <!-- <div class="statistics-inner">
                    <div class="statistics-split border-right bg-gray" id="analysisLine" onClick="">
                      <img src="images/zhexian.png" class="statistics-logo"/>
                    </div>
                    <div class="statistics-split border-right" id="analysisPie" onClick="">
                      <img src="images/pie.jpg" class="statistics-logo"/>
                    </div>
                    <div class="statistics-split right" id="analysisColumn" onClick="">
                      <img src="images/column.jpg" class="statistics-logo"/>
                    </div>
                  </div> -->
                  <input class="statistics-date search-btn mt-none ml-md" type="button" onclick="analysisSearchBtn()" value="搜索"/>
                </div>
              </div>
            </form>
            <div class="chart-wrapper" id="analysisGraph1">
              <div id="analysisChart1" class="highchart-wrapper">
              
              </div>
              <div class="remind-info display-none"></div>
              <div class="split-line"></div>
              <div id="analysisChart2" class="highchart-wrapper">
              
              </div>
              <div class="remind-info display-none"></div>
              <div class="split-line"></div>
              <div id="analysisChart3" class="highchart-wrapper mb-sm">
              
              </div>
              <div class="remind-info display-none"></div>
            </div>
            
            <div class="chart-wrapper display-none" id="analysisGraph2">
              <div id="analysisChart4" class="highchart-wrapper">
              
              </div>
              <div class="remind-info display-none analysis-height"></div>
              <div class="split-line"></div>
              <div id="analysisChart5" class="highchart-wrapper">
              
              </div>
              <div class="remind-info display-none analysis-height"></div>
            </div>
            <div class="chart-wrapper display-none" id="analysisGraph3">
              <div id="analysisChart6" class="highchart-wrapper">
              
              </div>
              <div id="analysisChart7" class="highchart-wrapper">
              
              </div>
              <div class="remind-info display-none analysis-height"></div>
              <div class="split-line"></div>
              <div id="analysisChart8" class="highchart-wrapper">
              
              </div>
              <div id="analysisChart9" class="highchart-wrapper">
              
              </div>
              <div class="remind-info display-none analysis-height"></div>
            </div>              
          </div>

          

        
        </div>
      </div>
      <div id="footer">
        <a href="index.html">
          <div class="footer-item">
            <div class="div-center text-center footer-content mt-xs">
              <img src="images/mingxi.png"/>
              <div class="footer-text">明细报表</div>
            </div>
          </div>
        </a>
        <a href="budget.html">
          <div class="footer-item">
            <div class="div-center text-center footer-content mt-xs">
              <img src="images/yusuan.png" />
              <div class="footer-text">收支预算</div>
            </div>
          </div>
        </a>
        <a href="analysis.html">
          <div class="footer-item">
            <div class="div-center text-center footer-content mt-xs">
              <img src="images/search2.png"/>
              <div class="footer-text theme-color">搜索分析</div>
            </div>
          </div>
        </a>
        <a href="manage.html">
          <div class="footer-item">
            <div class="div-center text-center footer-content mt-xs">
              <img src="images/guanli.png"/>
              <div class="footer-text">管理维护</div>
            </div>
          </div>
        </a>
      </div> 
    </div>
    
    <div class="sztype-content display-none" id="consumeInWrapper" data-aim="consume">
      <div class="content-wrapper">
        <div class="content-head">收入成员</div>
        <span class="glyphicon glyphicon-remove close-btn" onClick="closePage(this)"></span>
        <div class="swiper-container" id="swiperInConsume">
          <div class="swiper-wrapper width-full">
            <div class="swiper-slide width-full">
              <div id="inConsumeContent" class="width-full">

              </div>
            </div>
          </div>  
        </div>
      </div>
    </div>
    <div class="sztype-content display-none" id="consumePayWrapper" data-aim="consume">
      <div class="content-wrapper">
        <div class="content-head">支出成员</div>
        <span class="glyphicon glyphicon-remove close-btn" onClick="closePage(this)"></span>
        <div class="swiper-container" id="swiperPayConsume">
          <div class="swiper-wrapper width-full">
            <div class="swiper-slide width-full">
              <div id="payConsumeContent" class="width-full">

              </div>
            </div>
          </div>  
        </div>
      </div>
    </div>
    
    <div class="cover-div display-none" onClick="closeCenterPage()"></div>
    <script src="js/plugin.min.js"></script>
    <script src="js/common.js"></script>
    <script src="js/HighCharts/highcharts.js" type="text/javascript"></script>
    <script src="js/HighCharts/highcharts-3d.js" type="text/javascript"></script>
    <script src="js/HighCharts/highcharts-3d.src.js" type="text/javascript"></script>
    <!-- 添加主题样式js文件 -->  
    <script src="js/HighCharts/themes/grid.js" type="text/javascript"></script>
    <!--添加导出模式 -->  
    <script src="js/HighCharts/modules/exporting.js" type="text/javascript"></script>
    <script type="text/javascript">
    //  var detail = [{"summoney":"72","consumename":"父母"},{"summoney":"60","consumename":"配偶"}];
      var detail1=[{"incometypeid":"","detailid":"1","detailmark":"东一","adress":"食堂","consumename":"自己","memberaccount":"","detailmoney":"8.6","detailname":"午餐","detailszclassify":"0","timepoint":"2016.1","paytypeid":"2"},
      {"incometypeid":"1","detailid":"2","detailmark":"微创","adress":"公司","consumename":"自己","memberaccount":"","detailmoney":"2600","detailname":"工资薪水","detailszclassify":"0","timepoint":"2016.2","paytypeid":""},
      {"incometypeid":"1","detailid":"3","detailmark":"亲戚","adress":"家","consumename":"孩子","memberaccount":"","detailmoney":"100","detailname":"红包","detailszclassify":"1","timepoint":"2016.3","paytypeid":""},
      {"incometypeid":"","detailid":"4","detailmark":"","adress":"地铁站门口","consumename":"父母","memberaccount":"","detailmoney":"18","detailname":"打车","detailszclassify":"0","timepoint":"2016.4","paytypeid":"10"},
       {"incometypeid":"1","detailid":"2","detailmark":"微创","adress":"公司","consumename":"自己","memberaccount":"","detailmoney":"2600","detailname":"工资薪水","detailszclassify":"0","timepoint":"2016.2","paytypeid":""},
      {"incometypeid":"1","detailid":"3","detailmark":"亲戚","adress":"家","consumename":"孩子","memberaccount":"","detailmoney":"100","detailname":"红包","detailszclassify":"1","timepoint":"2016.3","paytypeid":""},
      {"incometypeid":"","detailid":"4","detailmark":"","adress":"地铁站门口","consumename":"父母","memberaccount":"","detailmoney":"18","detailname":"打车","detailszclassify":"0","timepoint":"2016.4","paytypeid":"10"},
       {"incometypeid":"1","detailid":"2","detailmark":"微创","adress":"公司","consumename":"自己","memberaccount":"","detailmoney":"2600","detailname":"工资薪水","detailszclassify":"0","timepoint":"2016.2","paytypeid":""},
      {"incometypeid":"1","detailid":"3","detailmark":"亲戚","adress":"家","consumename":"孩子","memberaccount":"","detailmoney":"100","detailname":"红包","detailszclassify":"1","timepoint":"2016.3","paytypeid":""},
      {"incometypeid":"","detailid":"4","detailmark":"","adress":"地铁站门口","consumename":"父母","memberaccount":"","detailmoney":"18","detailname":"打车","detailszclassify":"0","timepoint":"2016.4","paytypeid":"10"},
      {"incometypeid":"1","detailid":"5","detailmark":"亲戚","adress":"家","consumename":"孩子","memberaccount":"","detailmoney":"100","detailname":"红包","detailszclassify":"0","timepoint":"2016.3","paytypeid":""},
      {"incometypeid":"","detailid":"6","detailmark":"","adress":"地铁站门口","consumename":"父母","memberaccount":"","detailmoney":"18","detailname":"打车","detailszclassify":"0","timepoint":"2016.4","paytypeid":"10"}];
      var inConsume1 = [{"consumeszclassify":"0","consumename":"自己","consumeid":"2"},{"consumeszclassify":"0","consumename":"配偶","consumeid":"4"},{"consumeszclassify":"0","consumename":"孩子","consumeid":"6"},{"consumeszclassify":"0","consumename":"父母","consumeid":"8"},{"consumeszclassify":"0","consumename":"爷爷奶奶","consumeid":"10"},{"consumeszclassify":"0","consumename":"亲戚","consumeid":"11"},{"consumeszclassify":"0","consumename":"朋友","consumeid":"12"},{"consumeszclassify":"0","consumename":"家庭公用","consumeid":"13"}];
      var payConsume1 = [{"consumeszclassify":"0","consumename":"支出","consumeid":"2"},{"consumeszclassify":"0","consumename":"配偶","consumeid":"4"},{"consumeszclassify":"0","consumename":"孩子","consumeid":"6"},{"consumeszclassify":"0","consumename":"父母","consumeid":"8"},{"consumeszclassify":"0","consumename":"爷爷奶奶","consumeid":"10"},{"consumeszclassify":"0","consumename":"亲戚","consumeid":"11"},{"consumeszclassify":"0","consumename":"朋友","consumeid":"12"},{"consumeszclassify":"0","consumename":"家庭公用","consumeid":"13"}];
      var detail,
        inConsume,
        payConsume;
      var flag = true;
      $(function(){
        initHeight();
        initDate();
        initAnalysisDate();
        initAnalysisLen(); 
        initDataPost();
        showDataList("inConsumeContent",inConsume,type_inConsume);
        showDataList("payConsumeContent",payConsume,type_payConsume);
        $("#consume").val(payConsume[0].consumename);//初始化
        getSearchData("list");
        showDetail(detail);
        analysisSearchBtn();
      });
      function initDataPost(){
        bindUserData();
        inConsume = postData("showInConsume");
        payConsume = postData("showPayConsume");
      }
      function initDate(){
        bindDate("startDate");
        $("#startDate").val(formatDate("startTime"));        
        bindDate("endData");
        $("#endData").val(formatDate());
      }
      function initHeight(){
        var swiperInitHeight = parseInt(winHeight) - headHeight - footerHeight - 96;
        $("#swiperPagesAnalysis").css("height",swiperPageHeight+"px");
        $("#analysisList").css("height",swiperInitHeight+"px");
        $("#userCenterWrapper").css("height",(winHeight-110)+"px");
      }
      var isSelInComsume=false;
      function showConsume(){
        if(isSelInComsume){
          wrapperRaise("consumeInWrapper");
          initSwiper('swiperInConsume');
        }else{
          wrapperRaise("consumePayWrapper");
          initSwiper('swiperPayConsume');
        }
      }
      function changeDataShowType(type){
        $("#analysisLists").removeClass("bg-gray");
        $("#pieChart").removeClass("bg-gray");
        $("#columnChart").removeClass("bg-gray");
        $("#container").addClass("display-none");
        $("#analysisList").addClass("display-none");
        selectFunction(type);
      }

      function selectFunction(type){
        var titleInfo = $("#titleInfo").text();
        switch (type){
          case "list":$("#analysisList").removeClass("display-none");
                      $("#analysisLists").addClass("bg-gray");
                      getSearchData(type);
                      showDetail(detail);break;
          case "pie":$("#container").removeClass("display-none");
                    $("#pieChart").addClass("bg-gray");
                    getSearchData(type);
                    createChart("container","pie",titleInfo,titleInfo);;
                    var dataWrapper = getSeriesData(detail);
                    setChartData(dataWrapper);
                    setSearchTitle();break;
          case "column":$("#container").removeClass("display-none");
                    $("#columnChart").addClass("bg-gray");
                    getSearchData(type);
                    createChart("container","column",titleInfo,titleInfo);
                    var dataWrapper = getSeriesData(detail);
                    setChartData(dataWrapper);
                    setSearchTitle();break;
        }
      }
    
      function setSearchTitle(){
        var titleInfo = $("#titleInfo").text();
        var consumename = $("#consume").val();
        var titleText;
        switch (titleInfo){
          case "单人支出":titleText = consumename+"-支出";xAxisTitle = "支出类型";break;
          case "单人收入":titleText = consumename+"-收入";xAxisTitle = "收入类型";break;
          case "成员支出":titleText = "全部成员-支出";xAxisTitle = "成员类型";break;
          case "成员收入":titleText = "全部成员-收入";xAxisTitle = "成员类型";break;
        }
        setChartTitle(titleText,xAxisTitle);
      }
      function getSearchData(type){
        var data=getFormVal("searchForm");
        data["type"] = type;
        detail = postData("searchAllDetail",data);
      }
      function searchBtn(){
        var type;
        if($("#analysisLists").hasClass("bg-gray")){
          type = "list";
        }else{
          if($("#pieChart").hasClass("bg-gray")){
            type = "pie";
          }else{
            type = "column";
          }
        }
        selectFunction(type);
      }

      function showDetail(detail){
        $("#analysisDiv").empty();
        showDataList("analysisDiv",detail,type_detail);
        initSwiper("analysisSwiper");
        initPageSwiper("swiperPagesAnalysis",0,'');
      }
      // 选择类型
      function changeSearchType(obj,i){
        $(obj).parent().slideUp();
        $(obj).parent().prev().children().eq(0).text($(obj).text());
        $(obj).parent().prev().children().eq(1).val($(obj).text());
        switch(i){
          case 0:isSelInComsume=false;
          $("#consume").val(payConsume[0].consumename);$("#consume").attr("onclick","showConsume()");break;
          case 1:isSelInComsume=true;
          $("#consume").val(inConsume[0].consumename);$("#consume").attr("onclick","showConsume()");break;
          case 2:$("#consume").val("全部成员");$("#consume").attr("onclick",null);break;
          case 3:$("#consume").val("全部成员");$("#consume").attr("onclick",null);break;
        }
      }
      
      
      
      
      
      /*  分析  */
      
      // 分析 绑定时间
      function initAnalysisDate(){
        bindYearMonth("startTime");
        $("#startTime").val(formatDate("noDay"));        
        bindYearMonth("endTime");
        $("#endTime").val(nowMonthAddOne());
      }
      // 分析 初始化报表所在div高度
      function initAnalysisLen(){
        var height = swiperPageHeight-85;
        $("#analysisGraph1").css("height",height+"px");
        $("#analysisGraph2").css("height",height+"px");
        $("#analysisGraph3").css("height",height+"px");
      }
      // 分析 line、pie、column按钮改变展现形式
    /*  function changeAnalysisShowType(type){
        $("#analysisLine").removeClass("bg-gray");
        $("#analysisPie").removeClass("bg-gray");
        $("#analysisColumn").removeClass("bg-gray");
      }*/
      // 分析 类型下拉框的选择
      function changeAnalysisType(obj){
        $(obj).parent().slideUp();
        $(obj).parent().prev().children().eq(0).text($(obj).text());
      }
      // 分析 点击查询按钮
      function analysisSearchBtn(){
      /*  var type;
        if($("#analysisLine").hasClass("bg-gray")){
          type = "line";
        }else{
          if($("#analysisPie").hasClass("bg-gray")){
            type = "pie";
          }else{
            type = "column";
          }
        }*/
        var dataWrapper = [];
        var data = getFormVal("analysisForm");
        var xAxisTitle ;
        var  typeTitle = $("#typeTitle").text();
        switch(typeTitle){
          case "总收入-支出" :
                var actualAllIn = postData("actualAllIn",data);
                var actualAllPay = postData("actualAllPay",data);
                var budgetAllIn = postData("budgetAllIn",data);
                var budgetAllPay = postData("budgetAllPay",data);
              /*  var actualAllIn= [{"money":"3000"}];
                var actualAllPay = [{"money":"1228"}];
                var budgetAllIn = [{"money":"16800"}];
                var budgetAllPay = [{"money":"1902"}];*/
                $("#analysisGraph2").addClass("display-none");
                $("#analysisGraph3").addClass("display-none");
                $("#analysisGraph1").removeClass("display-none");
                var yingli =parseFloat(actualAllIn[0].money)-parseFloat(actualAllPay[0].money);
                dataWrapper[0] =[["实际总收入",parseFloat(actualAllIn[0].money)],["实际总支出",parseFloat(actualAllPay[0].money)],["总盈利",yingli]];
                dataWrapper[1] = ["实际总收入","实际总支出","盈利"];
                xAxisTitle = "实际总收入-实际总支出比对";
                createChart('analysisChart1',"column",xAxisTitle,typeTitle);
                setChartData(dataWrapper);
                setChartTitle(xAxisTitle,xAxisTitle);
                if(yingli<=0){
                  $("#analysisChart1").next().addClass("theme-color").text("主人，不好啦，该时间段内您已经入不敷出了哦");
                }else{
                  $("#analysisChart1").next().addClass("text-green").text("恭喜主人，该时间段内盈利了哦");
                }
                // 第二个图
                var inchae = parseFloat(actualAllIn[0].money)-parseFloat(budgetAllIn[0].money);
                dataWrapper[0] =[["实际总收入",parseFloat(actualAllIn[0].money)],["预算总收入",parseFloat(budgetAllIn[0].money)],["总盈利",inchae]];
                dataWrapper[1] = ["实际总收入","预算总收入","差额"];
                xAxisTitle = "实际总收入-预算总收入比对";
                createChart('analysisChart2',"column",xAxisTitle,typeTitle);
                setChartData(dataWrapper);
                setChartTitle(xAxisTitle,xAxisTitle);
                if(inchae<0){
                  $("#analysisChart2").next().addClass("theme-color").text("主人，该时间段内您的收入没达标，比预期的要少哦，请继续努力");
                }else{
                  $("#analysisChart2").next().addClass("text-green").text("恭喜主人，该时间段内您的收入比预期的要多啊");
                }
                
                // 第三个图
                var paychae = parseFloat(actualAllPay[0].money)-parseFloat(budgetAllPay[0].money);
                dataWrapper[0] =[["实际总支出",parseFloat(actualAllPay[0].money)],["预算总支出",parseFloat(budgetAllPay[0].money)],["总盈利",paychae]];
                dataWrapper[1] = ["实际总支出","预算总支出","差额"];
                xAxisTitle = "实际总支出-预算总支出比对";
                createChart('analysisChart3',"column",xAxisTitle,typeTitle);
                setChartData(dataWrapper);
                setChartTitle(xAxisTitle,xAxisTitle);
                if(paychae>0){
                  $("#analysisChart3").next().addClass("theme-color").text("主人，该时间段内您的支出已超过您的预算标准，请节俭点哦");
                }else{
                  $("#analysisChart3").next().addClass("text-green").text("恭喜主人，该时间段内您支出的比预期的少，表现不错哦，请继续保持啊");
                }
                $(".remind-info").removeClass("display-none");break;
                
          case "按成员类型" :
              $("#analysisChart4").empty();
              $("#analysisChart5").empty();
              $("#analysisChart4").next().text("").removeClass("theme-color text-green");
              $("#analysisChart5").next().text("").removeClass("theme-color text-green");
              var dataPay = postData("consumeActualBudgetData",data);
              var dataIn = postData("consumeActualBudgetDataIn",data);
              
            /*  var dataPay = [{"consumename":"爷爷奶奶","budgetAllPay":"0","actualAllPay":"666"},
              {"consumename":"父母","budgetAllPay":"16","actualAllPay":"66"},
              {"consumename":"亲戚","budgetAllPay":"160","actualAllPay":"0"},
              {"consumename":"自己","budgetAllPay":"460","actualAllPay":"496"},
              {"consumename":"孩子","budgetAllPay":"600","actualAllPay":"0"},
              {"consumename":"家庭公用","budgetAllPay":"666","actualAllPay":"0"}];
              
              var dataIn = [{"consumename":"孩子","budgetAllIn":"600","actualAllIn":"3200"},
              {"consumename":"自己","budgetAllIn":"4200","actualAllIn":"7526"},
              {"consumename":"配偶","budgetAllIn":"12000","actualAllIn":"6000"}];*/
              $("#analysisGraph1").addClass("display-none");
              $("#analysisGraph3").addClass("display-none");
              $("#analysisGraph2").removeClass("display-none");
              var actualAllPay = [];
              var budgetAllPay = [];
              var payConsumeType = [];
              
              var consumeYNum = 0;
              var consumeKNum = 0;
              for (i = 0; i<dataPay.length; i++) {
                var aPay = parseFloat(dataPay[i].actualAllPay);
                var bPay = parseFloat(dataPay[i].budgetAllPay);
                actualAllPay[i] = aPay;
                budgetAllPay[i] = bPay;
                payConsumeType[i] = dataPay[i].consumename;
                if((aPay - bPay>0)){
                  consumeKNum++;
                }else{
                  consumeYNum++;
                }
              }
              var seriesData = [];
              // 非series中的data，而是series 
              seriesData[0] = {
                name: "实际总支出",
                data: actualAllPay
              };
              seriesData[1] = {
                name: '预算总支出',
                data: budgetAllPay
              };
            //    charts.series[0].setData(seriesData);
              xAxisTitle = "成员类型";
              createChart('analysisChart4',"column",xAxisTitle,typeTitle,true);
              chart.addSeries(seriesData[0]);
              chart.addSeries(seriesData[1]);
              chart.xAxis[0].setCategories(payConsumeType);
              var chartTitle = "各成员实际-预算总支出比对";
              setChartTitle(chartTitle,xAxisTitle);
              var $consumePayInfo = $("#analysisChart4").next();
              if(consumeKNum==0){
                $consumePayInfo.addClass("text-green").text("主人太棒了，该时间段内，全部成员类型实际总支出比预算总支出都要低，请继续保持啊");
              }else{
                if(consumeYNum==0){
                  $consumePayInfo.addClass("theme-color").text("主人，糟糕，该时间段内，全部成员类型实际总支出比预算总支出都要高，要分析一下原因加把劲啦。");
                }else{
                  $consumePayInfo.text("主人，该时间段内，有"+consumeYNum+"个成员类型实际总支出比预算总支出都要低，有"
                  +consumeKNum+"个成员类型实际总支出比预算总支出都要高，情况一般");
                }
              }
              
              
             
              var actualAllIn = [];
              var budgetAllIn=[];
              var inConsumeType = [];
              var consumeInYNum = 0;
              var consumeInKNum = 0;
              // 成员实际总收入-预算总收入比对
              for (i = 0; i<dataIn.length; i++) {
                var aIn = parseFloat(dataIn[i].actualAllIn);
                var bIn = parseFloat(dataIn[i].budgetAllIn);
                actualAllIn[i] = aIn;
                budgetAllIn[i] = bIn;
                inConsumeType[i] = dataIn[i].consumename;
                if((aIn - bIn>0)){
                  consumeInYNum++;
                }else{
                  consumeInKNum++;
                }
              }
              // 非series中的data，而是series 
              seriesData[0] = {
                name: "实际总收入",
                data: actualAllIn
              };
              seriesData[1] = {
                name: '预算总收入',
                data: budgetAllIn
              };
              createChart('analysisChart5',"column",xAxisTitle,typeTitle,true);
              chart.addSeries(seriesData[0]);
              chart.addSeries(seriesData[1]);
              chart.xAxis[0].setCategories(inConsumeType);
              var chartTitle = "各成员实际-预算总收入比对";
              setChartTitle(chartTitle,xAxisTitle);
              var $consumeInInfo = $("#analysisChart5").next();
              if(consumeInKNum==0){
                $consumeInInfo.addClass("text-green").text("主人太棒了，该时间段内，全部成员类型实际总收入比预算总收入都要高，请继续保持啊。");
              }else{
                if(consumeInYNum==0){
                  $consumeInInfo.addClass("theme-color").text("主人，糟糕，该时间段内，全部成员类型实际总收入比预算总收入都要低，要分析一下原因加把劲啦。");
                }else{
                  $consumeInInfo.text("主人，该时间段内，有"+consumeInYNum+"个成员类型实际总收入比预算总收入要高，有"
                  +consumeInKNum+"个成员类型实际总收入比预算总收入要低，情况一般");
                }
              }
              $(".remind-info").removeClass("display-none");break;
              
              
          case "按收支类型" :
              $("#analysisChart4").empty();
              $("#analysisChart5").empty();
              $("#analysisChart4").next().text("").removeClass("theme-color text-green");
              $("#analysisChart5").next().text("").removeClass("theme-color text-green");
              var dataPay = postData("typeActualBudgetData",data);
              var dataIn = postData("typeActualBudgetDataIn",data);
            /*  var dataPay = [{"actualAllPay":"600","budgetAllPay":"1000","bigPayType":"餐饮"},
                          {"actualAllPay":"300","budgetAllPay":"600","bigPayType":"电影"},
                          {"actualAllPay":"1000","budgetAllPay":"2000","bigPayType":"1"},
                          {"actualAllPay":"1300","budgetAllPay":"1600","bigPayType":"2"},
                          {"actualAllPay":"500","budgetAllPay":"1000","bigPayType":"3"}];
               var dataIn = [{"actualAllIn":"600","budgetAllIn":"1000","incomeType":"11餐饮"},
                          {"actualAllIn":"300","budgetAllIn":"600","incomeType":"22电影"},
                          {"actualAllIn":"1000","budgetAllIn":"2000","incomeType":"11"},
                          {"actualAllIn":"1300","budgetAllIn":"1600","incomeType":"22"},
                          {"actualAllIn":"500","budgetAllIn":"1000","incomeType":"33"}]; */
              $("#analysisGraph1").addClass("display-none");
              $("#analysisGraph3").addClass("display-none");
              $("#analysisGraph2").removeClass("display-none");
              var actualAllPay = [];
              var budgetAllPay = [];
              var payType = [];
              var typeYNum = 0;
              var typeKNum = 0;
              for (i = 0; i<dataPay.length; i++) {
                var aPay = parseFloat(dataPay[i].actualAllPay);
                var bPay = parseFloat(dataPay[i].budgetAllPay);
                actualAllPay[i] = aPay;
                budgetAllPay[i] = bPay;
                payType[i] = dataPay[i].bigPayType;
                if((aPay - bPay>0)){
                  typeKNum++;
                }else{
                  typeYNum++;
                }
              }
              var seriesData = [];
              // 非series中的data，而是series 
              seriesData[0] = {
                name: "实际总支出",
                data: actualAllPay
              };
              seriesData[1] = {
                name: '预算总支出',
                data: budgetAllPay
              };
            //    charts.series[0].setData(seriesData);
              xAxisTitle = "收支类型";
              createChart('analysisChart4',"column",xAxisTitle,typeTitle,true);
              chart.addSeries(seriesData[0]);
              chart.addSeries(seriesData[1]);
              chart.xAxis[0].setCategories(payType);
              var chartTitle = "各类型实际-预算总支出比对";
              setChartTitle(chartTitle,xAxisTitle);
              var $typePayInfo = $("#analysisChart4").next();
              if(typeKNum==0){
                $typePayInfo.addClass("text-green").text("主人太棒了，该时间段内，全部支出类型实际总支出比预算总支出都要低，请继续保持啊");
              }else{
                if(typeYNum==0){
                  $typePayInfo.addClass("theme-color").text("主人，糟糕，该时间段内，全部支出类型实际总支出比预算总支出都要高，要分析一下原因加把劲啦。");
                }else{
                  $typePayInfo.text("主人，该时间段内，有"+typeYNum+"个支出类型实际总支出比预算总支出都要低，有"
                  +typeKNum+"个成员类型实际总支出比预算总支出都要高，情况一般");
                }
              }
              
              var actualAllIn = [];
              var budgetAllIn = [];
              var inType = [];
              var typeInYNum = 0;
              var typeInKNum = 0;
              // 各类型实际总收入-预算总收入比对
              for (i = 0; i<dataIn.length; i++) {
                var aIn = parseFloat(dataIn[i].actualAllIn);
                var bIn = parseFloat(dataIn[i].budgetAllIn);
                actualAllIn[i] = aIn;
                budgetAllIn[i] = bIn;
                inType[i] = dataIn[i].incomeType;
                if((aIn - bIn>0)){
                  typeInYNum++;
                }else{
                  typeInKNum++;
                }
              }
              // 非series中的data，而是series 
              seriesData[0] = {
                name: "实际总收入",
                data: actualAllIn
              };
              seriesData[1] = {
                name: '预算总收入',
                data: budgetAllIn
              };
              createChart('analysisChart5',"column",xAxisTitle,typeTitle,true);
              chart.addSeries(seriesData[0]);
              chart.addSeries(seriesData[1]);
              chart.xAxis[0].setCategories(inType);
              var chartTitle = "各类型实际-预算总收入比对";
              setChartTitle(chartTitle,xAxisTitle);
              var $typeInInfo = $("#analysisChart5").next();
              if(typeInKNum==0){
                $typeInInfo.addClass("text-green").text("主人太棒了，该时间段内，全部收入类型实际总收入比预算总收入都要高，请继续保持啊。");
              }else{
                if(typeInYNum==0){
                  $typeInInfo.addClass("theme-color").text("主人，糟糕，该时间段内，全部收入类型实际总收入比预算总收入都要低，要分析一下原因加把劲啦。");
                }else{
                  $typeInInfo.text("主人，该时间段内，有"+typeInYNum+"个收入类型实际总收入比预算总收入要高，有"
                  +typeInKNum+"个收入类型实际总收入比预算总收入要低，情况一般");
                }
              }
              $(".remind-info").removeClass("display-none");break;
              
           case "按月份" :
              $("#analysisChart6").empty();
              $("#analysisChart7").empty();
              $("#analysisChart8").empty();
              $("#analysisChart9").empty();
              $("#analysisChart7").next().text("").removeClass("theme-color text-green");
              $("#analysisChart9").next().text("").removeClass("theme-color text-green");
              var dataIn = postData("monthActualBudgetDataIn",data);
              var dataPay = postData("monthActualBudgetData",data);
            /*  var dataPay = [{"actualAllPay":"600","budgetAllPay":"1000","month":"2016-01"},
                          {"actualAllPay":"300","budgetAllPay":"600","month":"2016-02"},
                          {"actualAllPay":"1000","budgetAllPay":"2000","month":"2016-03"},
                          {"actualAllPay":"1300","budgetAllPay":"1600","month":"2016-04"},
                          {"actualAllPay":"500","budgetAllPay":"1000","month":"2016-05"}];
              var dataIn = [{"actualAllIn":"600","budgetAllIn":"1000","month":"2016-02"},
                          {"actualAllIn":"300","budgetAllIn":"600","month":"2016-03"},
                          {"actualAllIn":"1000","budgetAllIn":"2000","month":"2016-04"},
                          {"actualAllIn":"1300","budgetAllIn":"1600","month":"2016-05"},
                          {"actualAllIn":"500","budgetAllIn":"1000","month":"2016-06"}];*/
              $("#analysisGraph1").addClass("display-none");
              $("#analysisGraph2").addClass("display-none");
              $("#analysisGraph3").removeClass("display-none");
              var actualAllPay = [];
              var budgetAllPay = [];
              var monthPay = [];
              var monthPayYNum = 0;
              var monthPayKNum = 0;
              for (i = 0; i<dataPay.length; i++) {
                var aPay = parseFloat(dataPay[i].actualAllPay);
                var bPay = parseFloat(dataPay[i].budgetAllPay);
                actualAllPay[i] = aPay;
                budgetAllPay[i] = bPay;
                monthPay[i] = dataPay[i].month;
                if((aPay - bPay>0)){
                  monthPayKNum++;
                }else{
                  monthPayYNum++;
                }
              }
              var seriesData = [];
              // 非series中的data，而是series 
              seriesData[0] = {
                name: "实际总支出",
                data: actualAllPay
              };
              seriesData[1] = {
                name: '预算总支出',
                data: budgetAllPay
              };
              xAxisTitle = "月份";
              createChart('analysisChart6',"column",xAxisTitle,typeTitle,true);
              chart.addSeries(seriesData[0]);
              chart.addSeries(seriesData[1]);
              chart.xAxis[0].setCategories(monthPay);
              var chartTitle = "各月份实际-预算总支出比对";
              setChartTitle(chartTitle,xAxisTitle);
              // 折线图
              createChart('analysisChart7',"line",xAxisTitle,typeTitle,true);
              chart.addSeries(seriesData[0]);
              chart.addSeries(seriesData[1]);
              chart.xAxis[0].setCategories(monthPay);
              setChartTitle(chartTitle,xAxisTitle);
              var $monthPayInfo = $("#analysisChart7").next();
              if(monthPayKNum==0){
                $monthPayInfo.addClass("text-green").text("主人太棒了，该时间段内，全部月份实际总支出比预算总支出都要低，请继续保持啊");
              }else{
                if(monthPayYNum==0){
                  $monthPayInfo.addClass("theme-color").text("主人，糟糕，该时间段内，全部月份实际总支出比预算总支出都要高，要分析一下原因加把劲啦。");
                }else{
                  $monthPayInfo.text("主人，该时间段内，有"+monthPayYNum+"个月份实际总支出比预算总支出都要低，有"
                  +monthPayKNum+"个月份实际总支出比预算总支出都要高，情况一般");
                }
              }
              
              
              var actualAllIn=[];
              var budgetAllIn = [];
              var monthIn = [];
              var monthInYNum = 0;
              var monthInKNum = 0;
              // 各月份实际总收入-预算总收入比对---柱形图
              for (i = 0; i<dataIn.length; i++) {
                var aIn = parseFloat(dataIn[i].actualAllIn);
                var bIn = parseFloat(dataIn[i].budgetAllIn);
                actualAllIn[i] = aIn;
                budgetAllIn[i] = bIn;
                monthIn[i] = dataIn[i].month;
                if((aIn - bIn>0)){
                  monthInYNum++;
                }else{
                  monthInKNum++;
                }
              }
              // 非series中的data，而是series 
              seriesData[0] = {
                name: "实际总收入",
                data: actualAllIn
              };
              seriesData[1] = {
                name: '预算总收入',
                data: budgetAllIn
              };
              createChart('analysisChart8',"column",xAxisTitle,typeTitle,true);
              chart.addSeries(seriesData[0]);
              chart.addSeries(seriesData[1]);
              chart.xAxis[0].setCategories(monthIn);
              var chartTitle = "各月份实际-预算总收入比对";
              setChartTitle(chartTitle,xAxisTitle);       
              
              createChart('analysisChart9',"line",xAxisTitle,typeTitle,true);
              chart.addSeries(seriesData[0]);
              chart.addSeries(seriesData[1]);
              chart.xAxis[0].setCategories(monthIn);
              setChartTitle(chartTitle,xAxisTitle);
              var $monthInInfo = $("#analysisChart9").next();
              if(monthInKNum==0){
                $monthInInfo.addClass("text-green").text("主人太棒了，该时间段内，全部月份实际总收入比预算总收入都要高，请继续保持啊。");
              }else{
                if(monthInYNum==0){
                  $monthInInfo.addClass("theme-color").text("主人，糟糕，该时间段内，全部月份实际总收入比预算总收入都要低，要分析一下原因加把劲啦。");
                }else{
                  $monthInInfo.text("主人，该时间段内，有"+monthInYNum+"个月份实际总收入比预算总收入要高，有"
                  +monthInKNum+"个月份类型实际总收入比预算总收入要低，情况一般");
                }
              }
              $(".remind-info").removeClass("display-none");break;
        }
      }

    </script>
  </body>
</html>