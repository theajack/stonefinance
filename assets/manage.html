<!doctype html>
<html lang="zh-Hans">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="renderer" content="webkit">
    <meta name="HandheldFriendly" content="true">
    <meta http-equiv="Cache-Control" content="no-siteapp" >
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no, email=no">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-tap-highlight" content="no">
    <title></title>
    <link rel="stylesheet" href="css/style.css?v=1">
    <link rel="stylesheet" href="css/base.min.css">
    <link rel="stylesheet" href="css/plugin.min.css">
  </head>
  <body class="bg-white">
    <div id="userCenter" class="display-none">     
      <div class="user-head">
        <img src="images/logo3.png" class="center-photo"/>
      </div>
      <div id="userCenterWrapper">
        <div class="mt-md">
          <label class="common-lable">
          <span>账号</span>
          ：</label>
          <input id="memberAccount" type="text" data-valid="notnull" placeholder="账号" disabled="disabled"/>
        </div>
        <form id="userCenterForm">
          <div class="mt-md">
            <label class="common-lable">
            <span>密码</span>
            <span class="notice-mark">*</span>：</label>
            <input class="common-input" type="password" data-name="password" data-valid="notnull" id="passWord" placeholder="密码" disabled="disabled"/>
          </div>
          <div class="mt-md">
            <label class="common-lable">
            <span>姓名</span>
            ：</label>
            <input class="common-input" type="text" data-name="membername"  placeholder="姓名" disabled="disabled"/>
          </div>
          <div class="position-relative">
            <div class="disabled-div display-none" id="disabledDiv"></div>
            <div class="mt-md">
              <label class="common-lable">
              <span>出生年月</span>
              ：</label>
              <input class="common-input" type="text" data-name="memberbir" id="memberBir" data-valid="datetime" placeholder="出生年月" disabled="disabled"/>
            </div>
          </div>
          <div class="mt-md">
            <label class="common-lable">
              <span>性别</span>
            ：</label>
            <span class="ml-lg">
              <label class="sex-select" for="female">女</label>
              <input class="radio-select" type="radio" name="membersex" id="female" disabled="disabled" onClick="changeSex('0')"/>
              <label class="sex-select" for="male">男</label>
              <input class="radio-select" type="radio" name="membersex" id="male" disabled="disabled" onClick="changeSex('1')"/>
              <input type="text" data-name="membersex" id="memberSex" class="display-none"/>
            </span>
          </div>
          <div class="mt-md">
            <label class="common-lable">
            <span>电话</span>
            ：</label>
            <input class="common-input" type="text" data-name="membertele" data-valid="phone" placeholder="电话" disabled="disabled"/>
          </div>
          <div class="mt-md mb-md">
            <label class="common-lable">
            <span>密保问题</span>
            ：</label>
            <input class="common-input" type="text" data-name="question" placeholder="密保问题" disabled="disabled"/>
          </div>
          <div class="mt-md mb-md">
            <label class="common-lable">
            <span>密保答案</span>
            ：</label>
            <input class="common-input" type="text" data-name="answer" placeholder="密保答案" disabled="disabled"/>
          </div>
        </form>
        <div class="edit-button" id="editBtn" onclick="editInfo()">编辑</div>
        <div class="edit-button display-none" id="finishBtn" onClick="updateUserData()">完成</div>
      </div>
    </div>
    <div id="allContent">
      <div class="head-wrapper">
        <div class="head-inner div-center text-center" id="headInfo">
          <span class="head-text active left" onClick="changePage(0)">管理</span>
          <span class="head-text right" onClick="showWeiHu()">维护</span>
          <span class="user-photo glyphicon glyphicon-user" onclick="showCenterPage()"></span>
        </div>
      </div>   
      <div class="swiper-container" id="swiperPagesManage">
        <div class="swiper-scrollbar">
          <div class="swiper-scrollbar-drag swiper-scrollbar-cursor-drag"></div>
        </div>
        <div class="swiper-wrapper">
          <div class="swiper-slide">
            <div class="division-bar"></div>
            <div class="list-head">
              <div class="list-title">
                <span class="add-symbol glyphicon glyphicon-plus" id="addSymbol"></span>
                <span id="addText" onClick="showAddInPayType()">添加大类</span>
                <span class="vertical-bar float-right bg-gray"></span>
              </div>
              <div class="list-type-wrapper pl-md">
                <span class="list-type" id="inPayType" onClick="selectType(this)"><span>收入类别</span><span class="glyphicon glyphicon-chevron-down list-type-arrow"></span></span>
                <div class="list-type-select manage-select">
                  <div class="text-center" onClick="sTypeValManage(this)">收入类别</div>
                  <div class="text-center border-top-ddd" onClick="sTypeValManage(this)">支出类别</div>
                  <div class="text-center border-top-ddd" onClick="sTypeValManage(this)">消费成员</div>
                  <div class="text-center border-top-ddd" onClick="sTypeValManage(this)">收入成员</div>
                </div>
              </div>
            </div>         

            <div class="division-bar"></div>
            <div class="swiper-container" id="addInPayContainer">
              <div class="swiper-scrollbar">
                <div class="swiper-scrollbar-drag swiper-scrollbar-cursor-drag"></div>
              </div>
              <div class="swiper-wrapper">
                <div class="swiper-slide">
                  <div id="iPTypeInfo">
                  
                  
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="swiper-slide overflow-auto">
            <div class="item-title">安全</div>
            <div class="maintain-wrapper clearfix" onClick="showInfo(this)">
              <div class="land-logo">
                <img src="images/beifen.jpg" class="land-img mt-none"/>
              </div>
              <div class="land-text">数据备份恢复</div>
            </div>
            <div class="display-none info-wrapper">
              <div class="more-info" onClick="dataBackUpManage()">数据备份</div>
              <div class="split-horizon"></div>
              <div class="more-info" onClick="dataRecoverManage()">数据恢复</div>
              <div class="split-horizon"></div>
            </div>
            <div class="item-title">设置</div>
            <div class="maintain-wrapper clearfix">
              <div class="clearfix">
                <div class="land-logo">
                  <span class="glyphicon glyphicon-headphones boot-font"></span>
                </div>
                <div class="land-text music-control p-none">音乐控制</div>
                <div class="set-btn-wrapper p-3 bg-set-red position-relative" id="musicControl" onclick="changeStyle('musicControl')">
                  <span class="set-closed opacity-1 tran-opacity-05">已关闭</span>
                  <span class="set-opened opacity-0 tran-opacity-05">已开启</span>
                  <div class="set-btn position-relative left-59"></div>
                </div>
              </div>
              <div class="clearfix">
                <div class="land-logo">
                  <span class="glyphicon glyphicon-user boot-font"></span>
                </div>
                <div class="land-text music-control p-none">自动登录</div>
                <div class="set-btn-wrapper p-3 bg-set-red position-relative" id="autoLogin" onclick="changeStyle('autoLogin')">
                  <span class="set-closed opacity-1 tran-opacity-05">已关闭</span>
                  <span class="set-opened opacity-0 tran-opacity-05">已开启</span>
                  <div class="set-btn position-relative left-59"></div>
                </div>
              </div>
            </div>
            <div class="item-title">相关信息</div>
            <div class="maintain-wrapper clearfix" onClick="showInfo(this)">
              <div class="land-logo">
                <span class="glyphicon glyphicon-user boot-font"></span>
              </div>
              <div class="land-text">开发者信息</div>
            </div>
            <div class="display-none info-wrapper">
              <div class="more-info">姓名: 小石头</div>
              <div class="split-horizon"></div>
              <div class="more-info">工作室: TheaJack</div>
              <div class="split-horizon"></div>
              <div class="more-info">完成时间: 2016-05-10</div>
              <div class="split-horizon"></div>
            </div>
            <div class="maintain-wrapper clearfix" onClick="showInfo(this)">
              <div class="land-logo">
                <span class="glyphicon glyphicon-book boot-font"></span>
              </div>
              <div class="land-text">版本信息</div>
            </div>
            <div class="display-none info-wrapper">
              <div class="more-info">当前版本: V4.0</div>
              <div class="split-horizon"></div>
              <div class="more-info">更新时间: 2016-05-10</div>
              <div class="split-horizon"></div>
            </div>
            
            
            <div class="item-title">其他</div>
            <div class="maintain-wrapper clearfix" onclick="share()">
              <div class="land-logo">
                <img src="images/weixin.png" class="land-img mt-none"/>
              </div>
              <div class="land-text">分享到微信朋友圈</div>
            </div>
            <div class="maintain-wrapper clearfix" onclick="logout()">
              <div class="land-logo">
                <span class="glyphicon glyphicon glyphicon-off boot-font"></span>
              </div>
              <div class="land-text">注销登录</div>
            </div>
            
          </div>
            
        </div>
      </div>
      <form id="addITForm" class="zindex-100 display-none hidden-wrapper">
        <div class="head-wrapper">
          <span class="glyphicon glyphicon-chevron-left return-logo" onClick="pullHidden('addITForm')"></span>
          <div class="head-inside div-center text-center">
            <img src="images/logo3.png" class="height-full"/>
            <span class="page-title" id="addInPayTitle">添加收入类别</span>
          </div>
        </div>
        <div class="land-wrapper clearfix border-top-ddd mt-xlg">
          <div class="land-logo">
            <img src="images/account.png" class="land-img"/>
          </div>      
          <input type="text" class="land-text" data-name="incometypename" placeholder="收入类别名称"/>
        </div>
        <div class="edit-button mt-xlg" onClick="addInPayType()">保存</div>
      </form>
      <div id="footer">
        <a href="index.html">
          <div class="footer-item">
            <div class="div-center text-center footer-content mt-xs">
              <img src="images/mingxi.png"/>
              <div class="footer-text">明细报表</div>
            </div>
          </div>
        </a>
        <a href="budget.html">
          <div class="footer-item">
            <div class="div-center text-center footer-content mt-xs">
              <img src="images/yusuan.png" />
              <div class="footer-text">收支预算</div>
            </div>
          </div>
        </a>
        <a href="analysis.html">
          <div class="footer-item">
            <div class="div-center text-center footer-content mt-xs">
              <img src="images/search.png"/>
              <div class="footer-text">搜索分析</div>
            </div>
          </div>
        </a>
        <a href="#">
          <div class="footer-item">
            <div class="div-center text-center footer-content mt-xs">
              <img src="images/guanli2.png"/>
              <div class="footer-text theme-color">管理维护</div>
            </div>
          </div>
        </a>
      </div> 
    </div>
    <div class="cover-div display-none" onClick="closeCenterPage()"></div>
    <script src="js/plugin.min.js"></script>
    <script src="js/common.js"></script>
    <script src="js/HighCharts/highcharts.js" type="text/javascript"></script>
    <script src="js/HighCharts/highcharts-3d.js" type="text/javascript"></script>
    <script src="js/HighCharts/highcharts-3d.src.js" type="text/javascript"></script>
    <!-- 添加主题样式js文件 -->  
    <script src="js/HighCharts/themes/grid.js" type="text/javascript"></script>
    <!--添加导出模式 -->  
    <script src="js/HighCharts/modules/exporting.js" type="text/javascript"></script>
    <script type="text/javascript">
    $(function(){
      initAll();
      showIncomeType();
      bindUserData();
    });
    function initAll(){
      $("#swiperPagesManage").css("height",swiperPageHeight+"px");
      $("#addInPayContainer").css("height",(swiperPageHeight-55)+"px");
      $("#maintainWrapper").css("margin-top",(swiperPageHeight-137)/2+"px");
      $("#userCenterWrapper").css("height",(winHeight-110)+"px");
    }
    function initSwitchBtn(){
      var data=postData("getLoginState");
      
        
      //var data=$.parseJSON('{"account":"1","isPlayBgm":"false","isAutoLogin":"true","isRememberMe":"true","password":"1"}');
      if(data.isAutoLogin=="true"){
        turnOn("autoLogin");
      }
      if(data.isPlayBgm=="true"){
        turnOn("musicControl");
      }
    }
    function showIncomeType(){
      var data = postData("showIncomeType");
    //  var data = [{"incometypeid":"1","incometypename":"工资薪水"},{"incometypeid":"2","incometypename":"奖金"},{"incometypeid":"3","incometypename":"兼职外快"},{"incometypeid":"4","incometypename":"福利补贴"},{"incometypeid":"5","incometypename":"生活费"},{"incometypeid":"6","incometypename":"退款返款"},{"incometypeid":"7","incometypename":"公积金"},{"incometypeid":"8","incometypename":"礼金"},{"incometypeid":"9","incometypename":"基金"},{"incometypeid":"10","incometypename":"红包"},{"incometypeid":"11","incometypename":"股票"},{"incometypeid":"12","incometypename":"营业收入"},{"incometypeid":"13","incometypename":"租金"},{"incometypeid":"14","incometypename":"利息"},{"incometypeid":"15","incometypename":"其他"}];
      showDataList("iPTypeInfo",data,type_income);
      setTimeout(function(){
        initSwiper("addInPayContainer");
        initPageSwiper("swiperPagesManage",0,type_manage);
      },1000);
      $(".one-detail").attr("onClick",null);
      $(".one-detail").find(".pr-120").attr("onclick",null);
    }
    function showAddInPayType(){
      pullHidden('addITForm');
      var inPayType = $("#inPayType").text();
      var $dataNameDiv = $("#addITForm").find('[data-name]');
      switch(inPayType){
        case "收入类别":
          $("#addInPayTitle").text("添加收入类别");
          $dataNameDiv.attr({"data-name":"incometypename","placeholder":"收入类别名称"});break;
        case "支出类别":
          $("#addInPayTitle").text("添加支出类别");
          $dataNameDiv.attr({"data-name":"bigpaytypename","placeholder":"支出类别名称"});break;
        case "收入成员":
          $("#addInPayTitle").text("添加收入成员");
          $dataNameDiv.attr({"data-name":"consumename","placeholder":"收入成员名称"});break;
        case "消费成员":
          $("#addInPayTitle").text("添加消费成员");
          $dataNameDiv.attr({"data-name":"consumename","placeholder":"消费成员名称"});break;
      }
    }
    /*  类型的添加  */
    function addInPayType(){
      $("#iPTypeInfo").empty();
      var inPayType = $("#inPayType").text();
      var result;
      var addData = getFormVal("addITForm");
      switch (inPayType){
        case "收入类别" :
          result = postData("addIncomeType",addData);
          var data = postData("showIncomeType");
          showDataList("iPTypeInfo",data,type_income);break;
        case "支出类别" :
          result = postData("addBigPayType",addData);
          var data = postData("showBigPayType");
          showDataList("iPTypeInfo",data,type_pay);break;
        case "收入成员" :
          addData["consumeszclassify"] = 1;
          result = postData("addInConsume",addData);
          var data = postData("showInConsume");
          showDataList("iPTypeInfo",data,type_inConsume);break;
        case "消费成员" :
          addData["consumeszclassify"] = 0;
          result = postData("addPayConsume",addData);
          var data =  postData("showPayConsume");
          showDataList("iPTypeInfo",data,type_payConsume);break;
      }
      setTimeout(function(){
        detailSwiper.reInit();
      },1000);
      if(result==true){
        mesShow("添加成功，将返回管理页面查看","success");
        pullHidden("addITForm");
      }else{
        mesShow("此类型已存在，请重新输入","warn");
      }
      $("#addITForm").find('[data-name]').val("");
    }
    /*  类型（收支、成员）的选择  */
    function sTypeValManage(obj){
      selectTypeVal(obj);
      var objText = $(obj).text();
      $("#iPTypeInfo").empty();
      if(objText=="收入类别"||objText=="收入成员"){
        if(objText=="收入类别"){
          var data = postData("showIncomeType");
         // var data = [{"incometypeid":"1","incometypename":"工资薪水"},{"incometypeid":"2","incometypename":"奖金"},{"incometypeid":"3","incometypename":"兼职外快"},{"incometypeid":"4","incometypename":"福利补贴"},{"incometypeid":"5","incometypename":"生活费"},{"incometypeid":"6","incometypename":"退款返款"},{"incometypeid":"7","incometypename":"公积金"},{"incometypeid":"8","incometypename":"礼金"},{"incometypeid":"9","incometypename":"基金"},{"incometypeid":"10","incometypename":"红包"},{"incometypeid":"11","incometypename":"股票"},{"incometypeid":"12","incometypename":"营业收入"},{"incometypeid":"13","incometypename":"租金"},{"incometypeid":"14","incometypename":"利息"},{"incometypeid":"15","incometypename":"其他"},{"incometypeid":"16","incometypename":"抽奖"},{"incometypeid":"17","incometypename":"抽奖"},{"incometypeid":"18","incometypename":"抽奖"},{"incometypeid":"19","incometypename":"抽奖"},{"incometypeid":"20","incometypename":"抽奖"},{"incometypeid":"21","incometypename":"抽奖"},{"incometypeid":"22","incometypename":"抽奖"},{"incometypeid":"23","incometypename":"抽奖"},{"incometypeid":"24","incometypename":"抽奖"},{"incometypeid":"25","incometypename":"抽奖"},{"incometypeid":"26","incometypename":"抽奖"},{"incometypeid":"27","incometypename":"抽奖"},{"incometypeid":"28","incometypename":"抽奖"},{"incometypeid":"29","incometypename":"抽奖"},{"incometypeid":"30","incometypename":"抽奖"},{"incometypeid":"31","incometypename":"抽奖"},{"incometypeid":"32","incometypename":"抽奖"},{"incometypeid":"33","incometypename":"抽奖"},{"incometypeid":"34","incometypename":"抽奖"},{"incometypeid":"35","incometypename":"抽奖"},{"incometypeid":"36","incometypename":"抽奖"},{"incometypeid":"37","incometypename":"抽奖"},{"incometypeid":"38","incometypename":"抽奖"},{"incometypeid":"39","incometypename":"抽奖"},{"incometypeid":"40","incometypename":"抽奖"},{"incometypeid":"41","incometypename":"抽奖"},{"incometypeid":"42","incometypename":"抽奖"},{"incometypeid":"43","incometypename":"抽奖"},{"incometypeid":"44","incometypename":"抽奖"},{"incometypeid":"45","incometypename":"抽奖"},{"incometypeid":"46","incometypename":"抽奖"},{"incometypeid":"47","incometypename":"抽奖"},{"incometypeid":"48","incometypename":"抽奖"},{"incometypeid":"49","incometypename":"抽奖"},{"incometypeid":"50","incometypename":"萍"},{"incometypeid":"51","incometypename":""}];
          showDataList("iPTypeInfo",data,type_income);
        }else{
          var data = postData("showInConsume");
          showDataList("iPTypeInfo",data,type_inConsume);
        }
        $("#addSymbol").addClass("income").removeClass("pay");
        $("#addText").removeClass("theme-color");
      }
      if(objText=="支出类别"||objText=="消费成员"){
        if(objText=="支出类别"){
          var data = postData("showBigPayType");
         // var data = [{"bigpaytypeid":"1","bigpaytypename":"餐饮 "},{"bigpaytypeid":"2","bigpaytypename":"交通"},{"bigpaytypeid":"3","bigpaytypename":"购物"},{"bigpaytypeid":"4","bigpaytypename":"娱乐"},{"bigpaytypeid":"5","bigpaytypename":"投资"},{"bigpaytypeid":"6","bigpaytypename":"医教"},{"bigpaytypeid":"7","bigpaytypename":"居家"},{"bigpaytypeid":"8","bigpaytypename":"人情"},{"bigpaytypeid":"9","bigpaytypename":"生意"}];
          showDataList("iPTypeInfo",data,type_pay);
        }else{
          var data =  postData("showPayConsume");
          showDataList("iPTypeInfo",data,type_payConsume);
        }
        $("#addSymbol").addClass("pay").removeClass("income");
        $("#addText").addClass("theme-color");
      }
      setTimeout(function(){
        detailSwiper.reInit();
      },1300);
      $(".more-info").attr("onClick",null);
      $(".one-detail").attr("onClick",null);
    }
    function changeStyle(btn){
      if($("#"+btn+" .set-btn").css("left")=="0px"){
        turnOff(btn);
        if(btn=="musicControl"){
          stopBgm();
        }else if(btn=="autoLogin"){
          postData("autoLoginOff");
        }
      }else{
        turnOn(btn);
        if(btn=="musicControl"){
          playBgm();
        }else if(btn=="autoLogin"){
          postData("autoLoginOn");
        }
      }
    }
    function turnOn(btn){
      $("#"+btn+" .set-btn").animate({left:0});
      $("#"+btn).css("background-color","#84d05f")
      $("#"+btn+" .set-closed").css("opacity","0");
      $("#"+btn+" .set-opened").css("opacity","1");
    }
    function turnOff(btn){
      $("#"+btn+" .set-btn").animate({left:59});
      $("#"+btn).css("background-color","#ec4745");
      $("#"+btn+" .set-closed").css("opacity","1");
      $("#"+btn+" .set-opened").css("opacity","0");
    }
    
    function showInfo(obj){
      $(obj).next().slideToggle();
    }
    function dataBackUpManage(){
      var result = postData("dataBackUp");
      if(result){
        mesShow("数据备份成功","success",600);
      }else{
        mesShow("数据备份出错","error",600);
      }
    }
    function dataRecoverManage(){
      var result = postData("dataRecover");
      if(result){
        mesShow("数据恢复成功","success",600);
      }else{
        mesShow("数据恢复出错","error",600);
      }
    }
    function logout(){
      mesShow("注销成功","success",600);
      window.location.href=(encodeURI("land.html?auto=false"));
      postData("logout");
    }
    function share(){
      postData("share");
    }
    function showWeiHu(){
      changePage(1);
      initSwitchBtn();
    }
    </script>
  </body>
</html>